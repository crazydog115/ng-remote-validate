(function(angular){"use strict";if(!angular){throw"Missing something? Please add angular.js to your project or move this script below the angular.js reference"}var directiveId="ngRemoteValidate",remoteValidate=function($http,$timeout,$q){return{restrict:"A",require:["ngModel","^form"],link:function(scope,el,attrs,ctrls){var ngModel=ctrls[0];var form=ctrls[1];var cache={},handleChange,setValidation,addToCache,request,shouldProcess,options={ngRemoteThrottle:400,ngRemoteMethod:"POST"};angular.extend(options,attrs);if(options.ngRemoteValidate.charAt(0)==="["){options.urls=eval(options.ngRemoteValidate)}else{options.urls=[options.ngRemoteValidate]}if(options.ngRemoteReference){if(options.ngRemoteReference.charAt(0)==="["){options.references=eval(options.ngRemoteReference)}else{options.references=[options.ngRemoteReference]}}addToCache=function(e){var t=e[0].data.value;if(cache[t])return cache[t];cache[t]=e};shouldProcess=function(e){var t=false;for(var n in ngModel.$error){if(ngModel.$error[n]&&n!=directiveId){t=true;break}}return!(ngModel.$pristine||t)};setValidation=function(e,t){var n=0,r=e.length,i=true;for(;n<r;n++){if(!e[n].data.isValid){i=false;break}}if(!t){addToCache(e)}ngModel.$setValidity(directiveId,i);el.removeClass("ng-processing");ngModel.$processing=false};handleChange=function(e){if(typeof e==="undefined")return;if(!shouldProcess(e)){return setValidation([{data:{isValid:true,value:e}}],true)}if(cache[e]){return setValidation(cache[e],true)}if(request){$timeout.cancel(request)}request=$timeout(function(){el.addClass("ng-processing");ngModel.$processing=true;var t=[],n=0,r=options.urls.length,i={value_to_validate:e},s={method:options.ngRemoteMethod};if(options.references){options.references.forEach(function(e){if(!form[e].$viewValue)return i[e]=undefined;i[e]=form[e].$viewValue;if(typeof i[e]=="object"&&i[e]!==null){i[e]=i[e].id}})}if(options.ngRemoteMethod=="POST"){s.data=i}else{s.params=i}for(;n<r;n++){s.url=options.urls[n];t.push($http(s))}$q.all(t).then(setValidation)},options.ngRemoteThrottle);return true};scope.$watch(function(){return ngModel.$viewValue},handleChange)}}};angular.module("remoteValidation",[]).constant("MODULE_VERSION","##_version_##").directive(directiveId,["$http","$timeout","$q",remoteValidate])})(this.angular)